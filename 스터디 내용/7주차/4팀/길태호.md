# CHAPTER 3.2 판다스 기초
-------
## 3.2.1 판다스 개요
-----------

### • 판다스의 주요 기능

• 누락 데이터(NaN) 처리의 유연한 기능
• 가변적인 사이즈 조절 기능(데이터프레임을 사용한 고차원적인 열을 추가 • 삭제)
• 데이터의 집계 및 변환 기능
• 자동적이며 명확한 데이터 정렬 기능
• 다양한 형식의 데이터 입출력 기능
• 축(axes)의 다중 라벨링(labeling)
• 시계열 데이터 처리 기능
• 레이블 기반의 슬라이싱, 인덱싱，부분 추출 기능
• 데이터셋에 대한 피봇팅과 유연한 형상 변경 기능

### • 판다스에 적합한 데이터 유형

• 통계 데이터셋
• 시계열 형식의 데이터
• 데이터베이스 테이블이나 스프레드시트와 같이 여러 유형의 열(column)로 구성된 표 형식의 데이터

### • 시리즈와 데이터프레임

 • 시리즈: 축 방향으로 레이블(label)을 가지고 있는 1차원 배열로서，동일한 자료구조를 저장
 • 데이터프레임: 판다스의 가장 중요한 자료구조입니다. 여러 유형의 데이터가 표 형태로 되어 있으며 사이즈
변경이 가능한 2차원 형식의 데이터 구조입니다.  


## 3.2.2 시리즈
-----------
### • 시리즈의 개념:
시리즈는 축 방향으로 label을 가지고 있는 1차원 형태의 배열 구조입니다.    
레이블은 숫자 형식 또는 문자열 형식의 인덱스 구조를 가지고 있습니다.     
인덱스를 이용하여 처리할 수 있는 다양한 메소드를 제공하고 있습니다.     
다차원 배열로부터 오버라이딩된 통계 관련 메소드들이 제공되고 있습니다.      
통계 관련 메소드들은 누락 데이터 (NaN)를 제외하는 연산을 수행합니다.     

### • 시리즈의 사용형식
•Series(data=None, index=None, dtype=None, name=None, copy=False,
fastpath=False)
•data: 구현할 데이터 명시   
•index: 색인의 이름을 지정   

### • 시리즈의 생성과 정보 확인하기
•myseries.name: 시리즈의 이름을 출력하거나 설정
•myseries.index.name: 시리즈의 색인 이름을 출력하거나 설정
•mysereis.index: 색인의 정보를 출력하거나 설정
•values: 시리즈 요소들의 값을 확인   

### • 시리즈의 데이터 읽기와 쓰기  
시리즈는 슬라이싱, index를 이용한 데이터 조회 등을 이용하여 데이터를 읽고 쓸 수 있다.   
ex) myseries [ [' 마포구' ] ] :'마포구'라는 색인 정보를 읽습니다.   

### • 시리즈의 산술 연산   
시리즈끼리는 산술 연산이 가능합니다. 가감승제에 필요한 연산자들도 사용이 가능
하며，add()，sub() 등의 함수가 지원됩니다. 각 함수의 매개변수 중 fill_value 매
개변수에 의하여 NaN을 치환할 수 있습니다. 산술 연산 시 양쪽 모두의 값이 NaN이이면
fill_value 옵션과 상관 없이 무조건 NaN이 됩니다.   

### • 판다스 공용 산술 연산 함수   
•add: 2개의 요소 값들을 더해주는 함수
•sub: 뺄셈(-)을 위한 함수
•mul: 곱셈을 위한 함수
•div: 나눗셈을 위한 함수   

### • 유일한 값, 값 세기, 멤버십   
• unique: 중복 값을 제거하고，유일 값만 저장하는 넘파이 객체(<class 'numpy. ndarray'>)를 반환   
• value_counts(): 항목들의 빈도 수를 구한 후，개수가 큰 순서부터 역순으로 출력는 함수   
• isin(): 명시된 어떤 조건이나 값이 시리즈에 포함되어 있으면 True를 리턴   


## 3.2.3 데이터프레임
-----------   

### • 데이터프레임 소개   

데이터프레임은 수평 방향으로 구분하기 위한 행 색인과 수직 방향으로 구분하기 위
한 열 색인 및 내부의 셀(cell)에 들어 있는 자료(data) 둥으로 구성되어 있다.   

• 자료: 데이터프레임의 각 셀에 들어 있는 데이터를 의미한다. 리스트，튜플，딕셔너리 객체 등 다양한 유형의 데이터가 사용된다.
• 행 색인: 자료는 행(row)로 구성되고 각 행은 이름을 가질 수 있습니다.
• 열 색인: 자료는 열(c이umn)로 구성되고 각 열은 이름을 가질 수 있습니다.   

### • 데이터프레임 사용 형식   
#### • DataFrame(data=None, index=None, columns=None, dtype=None, copy=False)   
#### •인자
•data: 기존 데이터프레임이나 딕서너리，넘파이 배열(ndarray)，리스트 등을 사용할 수 있습니다.   
•index: 행에 붙여지는 행 색인을 지정하는 옵션으로，기본값은 range(n)입니다.
•columns: 열에 붙여지는 열 색인을 지정하는 옵션으로 기본값은 range(n)입니다.
•dtype: 자료형을 지정할 때 사용합니다.   
•copy: 해당 자료에 대하여 복사본을 사용할 것인지를 지정하는 옵선입니다.   

### • 데이터프레임의 생성과 정보 확인해보기   
•columns.name = 'state': 열 색인에 대한 이름을 설정합니다.
•index.name = 'year': 행 색인에 대한 이름을 설정합니다.
•columns: 열 색인의 이름을 지정하거나，열 색인에 대한 정보를 얻을 수 있습니다.
•index: 색인 객체 정보를 보여줍니다.
•dtypes: 각 열(column)의 자료형 정보를 확인할 수 있습니다.
•values: 저장한데이터를2차원 배열(<class 'numpy.ndarray'〉)로 반환합니다.
•T(transform): 행과 열을 전치(행과 열을 교환)시킵니다.

### • 데이터프레임의 데이터 읽기와 쓰기

 #### • iloc 속성사용법
 데이터프레임.iloc[[숫자01, 숫자02，…]]   
 iloc 함수와 loc 속성을 사용하여 행 정보에 대한 데이터를 추출할 수 있다. 
 iloc 속성은 행 색인 번호를 기준으로 행을 추출하는 함수이다.    
 
 #### • loc 속성사용법
 데이터프레임.loc[[행라벨01, 행라벨02, •••]]
 loc 속성은 라벨(행색인)의 이름을 이용하여 행의 위치(location)를 찾아 줍니다.   
ex) my frame. loc [' 이순신' ]: '이순신' 행을읽어옵니다.
 
 또한, loc 속성은 행 기반의 데이터뿐만 아니라 열(column) 기반의 데이터도 추출할 수 있습니다.
• 데이터프레임.loc［［행라벨01, 행라벨02, •••］, ［열라벨01, 열라벨02, …】］  


 ### • 2개 이상의 관계 연산
 • 구현 순서
① 각각의 요구 조건을 별개의 시리즈 변수로 저장합니다.
② 시리즈 변수들을 병합하여 데이터프레임으로 만듭니다.
③ loc 속성과 all() 함수 또는 any() 함수를 적용합니다.(all 함수는 and, any 함수는 or의 역할)   

 ### • 데이터프레임의 산술 연산   
#### • 데이터프레임과 시리즈의 산술 연산
 add()함수의 axis를 0으로 하면 시리즈의 색인과 데이터프레임 색인 간의 연산이 된다.
 양쪽에 공존하지 않는 데이터는 NaN이 된다.   
 ex) result = myframe.add(myseries, axi s=0)

#### • 데이터프레임과 시리즈의 산술 연산
add()함수를 이용하여 시리즈의 색인과 데이터프레임 색인 간의 연산이 된다.
 양쪽에 공존하지 않는 데이터는 NaN이 된다.   
 ex) result = myframe.add(myframe2, fill_value=0)   
 
 ### 새로 알게 된 것
 
 1. 시리즈와 데이터프레임간의 연산에 대해 알게 되었다.
 2. 데이터프레임의 다양한 매개변수들에 대해 알게 되었고 사용방식을 익히게 되었다.
 3. 데이터프레임을 전치시키는 방법을 알게 되었다.   
 
 
 
 # 문제
 --------
 
 STEP 1) 아래 사이트에 들어가 코스피 상위 5개 종목의 순위, 종목명, 현재가를 데이터프레임으로 만들어 출력하시오.단, 행 색인을 순위로 두어 데이터프레임을 만드시오. (현재 순위가 변동되어 아래와 다를 경우 아래 출력예시의 순위로 가정하여 데이터프레임을 만드시오.)   
 https://finance.daum.net/domestic/market_cap?view=pc     
 

![image](https://user-images.githubusercontent.com/94752167/204119943-d25c4090-8ddf-4312-97d1-e05271f65ef2.png)    
(위 출력예시는 2022.11.25 기준이며, 종목명과 현재가는 변동가능)

STEP 2) 아래는 2022.11.24 장종료의 코스피 상위 5개 종목의 현재가이다. 아래와 같이 시리즈를 만드시오. 

![image](https://user-images.githubusercontent.com/94752167/204119725-997b6d7d-b013-4516-8e75-d68eaee3c7be.png)    
(출력 예시)

STEP 3) STEP 1에서 만든 현재가와 STEP 2에서 만든 시리즈를 통해 등락률을 아래와 같은 데이터프레임으로 만드시오.(힌트) sub 함수를 사용하여 STEP1의 현재가에서 STEP 2의 값을 뺸다.)
![image](https://user-images.githubusercontent.com/94752167/204119632-c2d5cee7-b41b-463a-a3cf-1424f1df138b.png)    
(출력 예시)   

-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----
-----

                        
# 정답 예시 코드
## STEP 1)
```
import numpy as np
from pandas import DataFrame


sdata={'종목명':['삼성전자','LG에너지솔루션','삼성바이오로직스','SK하이닉스','LG화학'],'현재가':['61000','571000','903000','85100','721000'],}
myframe=DataFrame(data=sdata,index=[1,2,3,4,5])
myframe.index.name='순위'
print(myframe)


```


## STEP 2)
```
from pandas import Series, DataFrame

myindex=[1,2,3,4,5]
mylist=['61000','571000','903000','85100','721000']
myseries=Series(data=mylist,index=myindex)
print(myseries)
```

## STEP 3)
```
import numpy as np
from pandas import DataFrame
from pandas import Series

sdata={'종목명':['삼성전자','LG에너지솔루션','삼성바이오로직스','SK하이닉스','LG화학'],'현재가':[61000,571000,903000,85100,721000]}
myframe=DataFrame(data=sdata,index=[1,2,3,4,5])
myframe.columns.name='순위'


myindex=[1,2,3,4,5]
mylist=[61400,568000,896000,86900,728000]
myseries=Series(data=mylist,index=myindex)


result=myframe['현재가'].sub(myseries,axis=0)
print(result)
```



   




