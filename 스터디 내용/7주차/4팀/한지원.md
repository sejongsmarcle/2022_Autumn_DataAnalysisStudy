# 3.2 판다스 기초

## 3.2.1 판다스 개요

> ### 판다스의 주요 기능
> - 누락 데이터(NaN) 처리의 유연한 기능
> - 가변적인 사이즈 조절 기능(데이터프레임을 사용한 고차원적인 열을 추가 • 삭제)
> - 데이터의 집계 및 변환 기능
> - 자동적이며 명확한 데이터 정렬 기능
> - 다양한 형식의 데이터 입출력 기능
> - 축(axes)의 다중 라벨링(labeling)
> - 시계열 데이터 처리 기능
> - 레이블 기반의 슬라이싱, 인덱싱，부분 추출 기능
> - 데이터셋에 대한 피봇팅과 유연한 형상 변경 기능

> ### 판다스에 적합한 데이터 내용
> - 통계 데이터셋
> - 시계열 형식의 데이터
> - 데이터베이스 테이블이나 스프레드시트와 같이 여러 유형의 열(column)로 구성된 표 형식의 데이터

## 3.2.2 시리즈 (Series)

### 시리즈란?
- 시리즈는 축 방향으로 label을 가지고 있는 1차원 형태의 배열 구조입니다. 
- 레이블은 숫자 형식 또는 문자열 형식의 인덱스 구조를 가지고 있습니다. 
- 인덱스를 이용하여 처리할 수 있는 다양한 메소드를 제공하고 있습니다. 
- 다차원 배열로부터 오버라이 딩된 통계 관련 메소드들이 제공되고 있습니다. 
- 통계 관련 메소드들은 누락 데이터(NaN)를 제외하는 연산을 수행합니다.

### 시리즈의 사용 형식
``` python
Series(data=None, index=None, dtype=None, name=None, copy=False, fastpath=False)
```

### 시리즈의 생성과 정보
``` python
myseries.name #시리즈의 이름을 출력하거나 설정합니다.
myseries.index.name #시리즈의 색인 이름을 출력하거나 설정합니다.
myseries.index = ['임꺽정'，'김춘추'，'윤봉길'，'이봉창'] #색인의 정보를 출력하거나 설정합니다. 색인 변경하기
print(myseries.values) # [10 40 30 20] # 시리즈 요소들의 값을 확인할 수 있습니다.
```

### 시리즈의 산술 연산   
- 시리즈끼리는 산술 연산이 가능합니다.
- 가감승제에 필요한 연산자들도 사용이 가능하며，add()，sub() 등의 함수가 지원됩니다.
- 각 함수의 매개변수 중 fill_value 매개변수에 의하여 NaN을 치환할 수 있습니다.
- 산술 연산 시 양쪽 모두의 값이 NaN이이면 fill_value 옵션과 상관 없이 무조건 NaN이 됩니다.

## 3.2.3 데이터프레임

### 데이터프레임이란?
- 데이터프레임은 판다스의 가장 중요한 자료구조로서，여러 유형의 데이터가 표 형태로 되어 있으며 사이즈 변경이 가능한 2차원 형식의 데이터 구조입니다.
- 또한 행과 열의 축에 대한 레이블된 축(labeled axes)을 포함하고 있습니다.
- 행과 열의 레이블에 대한 산술 연산도 가능합니다.

### 데이터프레임 소개
- 자료
  - 데이터프레임의 각 셀에 들어 있는 데이터를 의미합니다.
  - 리스트，튜플，딕셔너리 객체 등 다양한 유형의 데이터가 사용됩니다.
- 행색인 
  - 자료는 행(row)로 구성되고 각 행은 이름을 가질 수 있습니다.
- 열색인
  - 자료는 열(column)로 구성되고 각 열은 이름을 가질 수 있습니다.

### 데이터프레임의 사용 형식
``` python
DataFrame(data=None, index=None, columns=None, dtype=None, copy=False)
```
- 인자
  - data: 기존 데이터프레임이나 딕서너리，넘파이 배열(ndarray)，리스트 등을 사용할 수 있습니다.
  - index: 행에 붙여지는 행 색인을 지정하는 옵션으로，기본값은 range(n)입니다.
  - columns: 열에 붙여지는 열 색인을 지정하는 옵션으로 기본값은 range(n)입니다.
  - dtype: 자료형을 지정할 때 사용합니다.
  - copy: 해당 자료에 대하여 복사본을 사용할 것인지를 지정하는 옵선입니다.

## 새롭게 알게 된 것
1. https://hogni.tistory.com/7 판다스에서 행과 열을 다루는 법
2. https://seong6496.tistory.com/84 NaN 데이터를 다루는 법
3. https://hong-sam.tistory.com/100 데이터프레임에 대한 설명

## 문제

### csv 파일 다운
https://kosis.kr/statHtml/statHtml.do?orgId=101&tblId=DT_1DA7004S
1. 위 사이트 접속
2. (화면 왼쪽에) 인구 > 인구 총조사 > 인구부문 > 총조사인구(2015년 이후) > 전수부문 (등록센서스,2015년 이후) > 전수기본표 > 인구, 가구 및 주택...
3. (화면 오른쪽에) 조회설정 > 조회조건 > 행정구역병(읍면동) > 1레벨로 설정 > 조회
4. 자료 다운로드 (xlsx 형식으로)
5. 엑셀 파일에 들어가서, 다른이름으로 저장하기 > 파일 형식을 유니코드 UTF-8, CSV 형식으로 변경하여 저장
6. 파일 다운이 어려운 경우 밑의 csv파일 사용   
[인구_가구_및_주택.csv](https://github.com/sejongsmarcle/2022_Autumn_DataAnalysisStudy/files/10097856/_._._.csv)

### 문제 풀이
데이터프레임을 다음 순서에 따라 출력 예시처럼 출력하세요.
1. df.read_csv 메소드의 index_col 매개변수를 활용하여 행 색인을 첫번째 열로 교체하세요. (또는 set.index() 함수 활용 가능) (181p ~ 183p)
2. df.columns 메소드를 이용하여 열 색인을 첫 번째 행으로 교체하세요. 첫번째 행이 담긴 리스트는 list(df.values[0]) 를 사용하여 얻을 수 있습니다. (151p ~ )
3. df.drop 메소드를 이용하여 행을 삭제하세요. 삭제할 행의 이름은 '행정구역별(읍면동)', '읍부', '면부', '동부' 입니다.
``` python
drop(index=[행색인01, 행색인02, ... ], axis=0) #axis=1 일 경우 열
```
4. df.loc 메소드를 이용하여 총인구와 남자, 여자 인구를 출력하세요.
``` python
df.loc([행라벨01, 행라벨02, ...], [열라벨01, 열라벨02, ...]) 

#Hint 행 또는 열 전체 선택은 : 를 이용하여 할 수 있습니다.
df.loc(:, [열라벨01, 열라벨02, ...]) 또는 df.loc([행라벨01, 행라벨02, ...], :)
```

### 출력 예시
``` python
              총인구 (명)      남자 (명)      여자 (명)
행정구역별(읍면동)                                    
전국          51,738,071  25,850,044  25,888,027
서울특별시        9,472,127   4,584,251   4,887,876
부산광역시        3,324,335   1,624,745   1,699,590
대구광역시        2,387,911   1,177,420   1,210,491
인천광역시        2,957,044   1,482,202   1,474,842
광주광역시        1,475,262     732,088     743,174
대전광역시        1,479,740     740,481     739,259
울산광역시        1,120,753     578,207     542,546
세종특별자치시        366,227     183,616     182,611
경기도         13,652,529   6,898,723   6,753,806
강원도          1,521,890     767,067     754,823
충청북도         1,624,764     828,073     796,691
충청남도         2,175,960   1,116,818   1,059,142
전라북도         1,787,053     891,295     895,758
전라남도         1,778,124     897,120     881,004
경상북도         2,635,314   1,332,376   1,302,938
경상남도         3,305,931   1,676,753   1,629,178
제주특별자치도        673,107     338,809     334,298
```
.   
.   
.   
.   
.   
.   
.   
.   
.   
.   
.   

### 답
``` python
import pandas as pd
filename = '인구_가구_및_주택.csv'
df = pd.read_csv(filename, index_col='행정구역별(읍면동)')
df.columns = list(df.values[0])
df = df.drop(index=['행정구역별(읍면동)', '읍부', '면부', '동부'], axis=0)
df = df.loc[:, ['총인구 (명)', '남자 (명)', '여자 (명)']]
print(df)
```
